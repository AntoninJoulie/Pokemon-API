<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Pokémon API - PKMNAPI</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/styles.css">
</head>



<body onload="get()">
  <h1>Pokémon API - PKMNAPI !</h1>
  <img class="logo" src="./img/pokeball.svg" alt="pokeball">
  <h2>Essayez une recherche ! </h2>
  <p>Toutes les données Pokémon que vous avez toujours souhaitées : Dresseur, Pokémon, Region</p>
  <div class="get">
    <span class="get-spa">https://pkmnapi.herokuapp.com/</span>
    <input class="get-inp" id="url" placeholder="trainer/1/"></input>
    <button class="get-btn" onclick="get()">GET</button>
  </div>

  <pre id="body">

  </pre>

</body>

<script>

  function get(url) {
    url = 'https://pkmnapi.herokuapp.com/'
    url += document.getElementById('url').value || 'trainer/1/';
    httpGetAsync(url, (body) => {
      let bodyJSON = JSON.parse(body);
      document.getElementById('body').innerHTML = JSON.stringify(bodyJSON, null, 4);
    })
  }

  function httpGetAsync(url, callback) {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function () {
      if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
        callback(xmlHttp.responseText);
    }

    xmlHttp.open("GET", url, true);
    xmlHttp.send(null);
  }

</script>

</html>